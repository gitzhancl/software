<div ng-controller="PromotionActivityManageCreateCtrl" class="cms-pageList" xmlns="http://www.w3.org/1999/html">
    <ol class="breadcrumb">
        <li><a ng-href="{{menuConfig.promoact.sub[3].link}}">{{menuConfig.promoact.name}}</a></li>
        <li><a ng-href="{{menuConfig.promoact.sub[3].link}}">{{menuConfig.promoact.sub[3].name}}</a></li>
        <li class="active">{{menuConfig.promoact.sub[3].sub[0].name}}-{{promoact.type|promotionType}}</li><!-- -{{promoact.type}}-->
    </ol>

    <ul class="nav nav-justified" id="navBar">
        <li role="presentation" ng-class="{1:'active label-success',2:'active label-success'}[itemClass]"><a ng-click="preItem.createIndex()">1、选择活动类型</a></li>
        <li role="presentation" ng-class="{2:'active label-success',1:'disabled'}[itemClass]"><a href="javascript:void(0)">2、确认活动规则</a></li>
        <li role="presentation" class="disabled"><a href="javascript:void(0)">3、添加活动商品</a></li>
        <li role="presentation" class="disabled"><a href="javascript:void(0)">4、创建完成</a></li>
    </ul>

    <!-- 1、选择活动类型 -->
    <div id="selectType" class="cms-workarea form-inline text-center" ng-show="itemClass==1">
        <label class="control-label">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: red"> * </span>活动类型</label>
        <select class="form-control" ng-model="promoact.type" ng-options="type.deviceId as type.key for type in activityType" style = "width:200px;" ng-disabled="promoact.status == 1" ng-change="activityTypeChanged()"></select><br/>
        <br/>
        <label class="control-label"><span style="color: red"> * </span>活动商品类型</label>
        <select class="form-control" ng-model="promoact.productFrom" ng-options="type.deviceId as type.key for type in productType" style = "width:200px;" ng-disabled="promoact.status == 1||promoact.type=='FIRSTGIVE'"></select><br/>
        <br/>
        <label class="control-label">&nbsp;&nbsp;<span style="color: red"> * </span>优惠活动组</label>
        <select class="form-control" ng-model="promoact.groupId" ng-options="type.deviceId as type.key for type in activityGroupType" style = "width:200px;" ng-disabled="promoact.status == 1"></select>
        <br/>
        <div class=" clearfix cms-workarea form-inline text-center">
            <button title="下一步" ng-click="nextItem.nextItem()" class="btn btn-primary" >
                <span>下一步</span>
            </button>
        </div>
    </div>


    <!-- 2、确认活动规则 -->
    <div id="confirmRule" class="clearfix cms-workarea" ng-show="itemClass==2">
        <form class="form-horizontal" name="activityForm">
            <div class="row show-grid cms-workarea1">
                <div class="col-lg-1 cms-workarea1" style="text-align: right">
                    <label class="control-label"><span style="color: red"> * </span>活动名称</label>
                </div>
                <div class="col-lg-5"  style="text-align: left">
                    <input type="text" class="form-control" id="promoact.title" ng-model="promoact.title" placeholder="请输入名称" name="活动名称" size="40" required>
                </div>
                <div class="col-lg-3 cms-workarea1">
                    <label class="text-warning">限制40字以内（中文，字母，数字）</label>
                </div>
            </div>
            <div class="row show-grid cms-workarea1">
                <div class="col-lg-1 cms-workarea1" style="text-align: right">
                    <label class="control-label"><span style="color: red"> * </span>促销标签</label>
                </div>
                <div class="col-lg-5"  style="text-align: left">
                    <input type="text" class="form-control" id="promoact.tag" ng-model="promoact.tag" placeholder="请输入名称" size="12"  name="促销标签" required>
                </div>
                <div class="col-lg-3 cms-workarea1">
                    <label class="text-warning">限制12字以内（中文，字母，数字）</label>
                </div>
            </div>
            <div class="row show-grid cms-workarea1">
                <div class="col-lg-1 cms-workarea1" style="text-align: right">
                    <label class="control-label"><span style="color: red"> * </span>PC端显示名称</label>
                </div>
                <div class="col-lg-5"  style="text-align: left">
                    <input type="text" class="form-control" id="promoact.pcTitle" ng-model="promoact.pcTitle" placeholder="请输入名称" size="25" name="PC端显示名称" required>
                </div>
                <div class="col-lg-3 cms-workarea1">
                    <label class="text-warning">限制25字以内（中文，字母，数字）</label>
                </div>
            </div>
            <div class="row show-grid cms-workarea1">
                <div class="col-lg-1 cms-workarea1" style="text-align: right">
                    <label class="control-label"><span style="color: red"> * </span>移动端显示名称</label>
                </div>
                <div class="col-lg-5"  style="text-align: left">
                    <input type="text" class="form-control" id="promoact.mobileTitle" ng-model="promoact.mobileTitle" placeholder="请输入名称" size="25" name="移动端显示名称" required>
                </div>
                <div class="col-lg-3 cms-workarea1">
                    <label class="text-warning">限制25字以内（中文，字母，数字）</label>
                </div>
            </div>
            <div class="row show-grid cms-workarea1">
                <div class="col-lg-1 cms-workarea1" style="text-align: right">
                    <label class="control-label"><span style="color: red"> * </span>活动时间</label>
                </div>
                <div class="col-lg-2"  style="text-align: left">
                    <input type="text" class="form-control" ng-model="promoact.startTime" ulife-tooltip="开始时间" ulife-datetimepicker ulife-date-format required name="开始时间" ng-disabled="promoact.status == 1">
                </div>
                <!--至-->
                <div class="col-lg-2"  style="text-align: left">
                    <input type="text" class="form-control" ng-model="promoact.endTime"  ulife-tooltip="结束时间" ulife-datetimepicker ulife-date-format name="结束时间" required>
                </div>
                <div class="col-lg-3 cms-workarea1">
                    <label class="text-warning">最长可选时间范围：1年内</label>
                </div>
            </div>
            <div class="row show-grid cms-workarea1">
                <div class="col-lg-1 cms-workarea1" style="text-align: right">
                    <label class="control-label"><span style="color: red"> * </span>需求部门</label>
                </div>
                <div class="col-lg-2"  style="text-align: left">
                    <select class="form-control" ng-model="promoact.departmentId" ng-options="type.deviceId as type.key for type in deptType"  required ng-disabled="promoact.status == 1" name="需求部门"></select>
                </div>
                <div class="col-lg-1 cms-workarea1"  style="text-align: right">
                    <label class="control-label"><span style="color: red"> * </span>需求发起人</label>
                </div>
                <div class="col-lg-2"  style="text-align: left">
                    <input type="text" class="form-control" id="demandName" ng-model="promoact.demandMan"  placeholder="请输入需求发起人" size="40" required ng-disabled="promoact.status == 1" name="需求发起人">
                </div>
                <div class="col-lg-3 cms-workarea1">
                    <label class="text-warning">请如实填写员工姓名</label>
                </div>
            </div>
            <div class="row show-grid cms-workarea1">
                <div class="col-lg-1 cms-workarea1"  style="text-align: right">
                    <label class="control-label"><span style="color: red"> * </span>OA流程号</label>
                </div>
                <div class="col-lg-2"  style="text-align: left">
                    <input type="text" name="OA流程号" class="form-control" ng-model="promoact.oaNumber" placeholder="请输入OA流程号" size="40" required>
                </div>
                <div class="col-lg-3 cms-workarea1">
                    <label class="text-warning">请确认该OA流程号是否正确</label>
                </div>
            </div>
            <div class="row show-grid cms-workarea1">
                <div class="col-lg-1 cms-workarea1" style="text-align: right">
                    <label class="control-label"><span style="color: red"> * </span>活动规则</label>
                </div>
                <!--满x元减n元-->
                <div class="col-lg-6 bg-info"  style="text-align: left" ng-show="{'REDUCE':true}[promoact.type]||{'FIRSTREDUCE':true}[promoact.type]">
                    <table class="table table-condensed table-hover">
                        <tbody>
                        <tr ng-repeat="r in fullReduceRule">
                            <td style="width:120px">购物车金额满：</td>
                            <td style="width:120px">
                                <div class="input-group"  style="width:120px">
                                    <input type="number" class="form-control" ng-model="r.limit" ng-disabled="promoact.status == 1" ng-blur="limitChange(fullReduceRule)" min="1"/>
                                    <span class="input-group-addon">元</span>
                                </div>
                            </td>
                            <td>
                                <div class="input-group"   style="width: 180px">
                                    <span class="input-group-addon">即可减</span>
                                    <input type="number" class="form-control" ng-model="r.preferential" ng-disabled="promoact.status == 1" ng-blur="limitChange(fullReduceRule)" min="1"/>
                                    <span class="input-group-addon">元</span>
                                </div></td>
                            <td>
                                <div class="input-group"   style="width: 180px">
                                    <input type="text" class="form-control" ng-model="r.desc" placeholder="描述" min="1"/>
                                </div>
                            </td>
                            <td align="center"  style="vertical-align: middle;width: 50px" ng-hide="promoact.status == 1||$index==0">
                                <button title="删除" ng-click="removeFullReduceRule($index,1)" class="btn btn-danger btn-xs" aria-label="Left Align">
                                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <div class=" clearfix cms-workarea1 form-inline text-center" ng-hide="promoact.status == 1">
                        <button title="添加" ng-click="addFullReduceRule()"class="btn btn-sm" >
                            <span>添加</span>
                        </button>
                    </div>
                </div>
                <!--满x元赠A商品n件-->
                <div class="col-lg-6 bg-info"  style="text-align: left" ng-show="{'GIVE':true}[promoact.type]||{'FIRSTGIVE':true}[promoact.type]">
                    <table class="table table-condensed table-hover">
                        <tbody>
                        <tr ng-repeat="r in fullGiveRule">
                            <td>
                                <div class="input-group"   style="width: 200px">
                                    <span class="input-group-addon">购物车金额满：</span>
                                    <input id = "fullGiveRuleLimit" type="number" class="form-control" ng-model="r.limit" ng-disabled="promoact.status == 1" ng-blur="limitChange(fullGiveRule)" min="1"/>
                                </div>
                            </td>
                            <td>
                                <div class="col-lg-1"  style="width: 220px">
                                    <div class="input-group"  style="width: 200px">
                                        <span class="input-group-addon" ng-hide="$index==0">或：</span>
                                        <span class="input-group-addon" ng-hide="$index>0">赠：</span>
                                        <input type="number" class="form-control" ng-model="r.preferential" placeholder="itemId" ng-disabled="promoact.status == 1" ng-blur="limitChange(fullGiveRule)" min="1"/>
                                    </div>
                                </div>
                                <div class="col-lg-2"   style="width: 200px">
                                    <input type="text" class="form-control" ng-model="r.desc" placeholder="描述" min="1"/>
                                </div>
                            </td>
                            <td align="center"  style="vertical-align: middle;width: 50px" ng-hide="promoact.status == 1||$index==0">
                                <button title="删除" ng-click="removeFirstFullReduceRule($index,1)" class="btn btn-danger btn-xs" aria-label="Left Align">
                                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <!--<div class=" clearfix cms-workarea1 form-inline text-center" ng-hide="promoact.status == 1">-->
                        <!--<button title="添加" ng-click="addFirstFullReduceRule()"class="btn btn-success btn-sm" >-->
                            <!--<span>添加</span>-->
                        <!--</button>-->
                    <!--</div>-->
                </div>
                <!--A商品满n件减y元-->
                <div class="col-lg-7 bg-info"  style="text-align: left" ng-show="{'PIECEREDUCE':true}[promoact.type]">
                    <table class="table table-condensed table-hover">
                        <tbody>
                        <tr>
                        <td style="width: 180px">
                            <div class="input-group"   style="width: 180px">
                                <span class="input-group-addon">itemId：</span>
                                <input type="text" class="form-control" ng-model="pfrr.itemId" ng-disabled="promoact.status == 1"/>
                            </div>
                        </td>
                        </tr>
                        <tr ng-repeat="r in productFullReduceRule">
                        <!--<tr>-->
                            <td style="width: 150px">
                                <div class="input-group"   style="width: 150px">
                                    <span class="input-group-addon">满：</span>
                                    <input type="number" class="form-control" ng-model="r.limit" ng-disabled="promoact.status == 1" ng-blur="limitChange(productFullReduceRule)" min="1"/>
                                    <span class="input-group-addon">件</span>
                                </div>
                            </td>
                            <td style="width: 180px">
                                <div class="input-group"   style="width: 180px">
                                    <span class="input-group-addon">减：</span>
                                    <input type="number" class="form-control" ng-model="r.preferential" ng-disabled="promoact.status == 1" ng-blur="limitChange(productFullReduceRule)" min="1"/>
                                    <span class="input-group-addon">元</span>
                                </div>
                            </td>
                            <td>
                                <div class="input-group"   style="width: 180px">
                                    <input type="text" class="form-control" ng-model="r.desc" placeholder="描述" min="1"/>
                                </div>
                            </td>
                            <td align="center"  style="vertical-align: middle;width: 50px" ng-hide="promoact.status == 1||$index==0">
                                <button title="删除" ng-click="removeProductFullReduceRule($index,1)" class="btn btn-danger btn-xs" aria-label="Left Align">
                                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <!--<div class=" clearfix cms-workarea1 form-inline text-center" ng-hide="promoact.status == 1">-->
                        <!--<button title="添加" ng-click="addProductFullReduceRule()"class="btn btn-sm" >-->
                            <!--<span>添加</span>-->
                        <!--</button>-->
                    <!--</div>-->
                </div>

                <!--A商品满n件赠B商品m件-->
                <div class="col-lg-6 bg-info"  style="text-align: left" ng-show="{'PIECEGIVE':true}[promoact.type]">
                    <table class="table table-condensed table-hover">
                        <tbody>
                        <tr>
                            <div class="row show-grid cms-workarea1">
                                <div class="col-lg-3"  style="text-align: left">
                                    <div class="input-group">
                                        <span class="input-group-addon">itemId：</span>
                                        <input type="text" class="form-control" ng-model="pfpr.itemId" ng-disabled="promoact.status == 1"/>
                                    </div>
                                </div>
                            </div>
                        </tr>
                        <tr ng-repeat="r in productFullPresentRule">
                            <td style="width: 150px">
                                <div class="input-group" style="width: 150px">
                                    <span class="input-group-addon">满</span>
                                    <input type="number" class="form-control" ng-model="r.limit" ng-disabled="promoact.status == 1" ng-blur="limitChange(productFullPresentRule)" min="1"/>
                                    <span class="input-group-addon">件</span>
                                </div>
                            </td>
                            <td style="width: 150px">
                                <div class="input-group" style="width: 150px">
                                    <span class="input-group-addon">赠</span>
                                    <input type="number" class="form-control" ng-model="r.preferential" placeholder="itemId" ng-disabled="promoact.status == 1" ng-blur="limitChange(productFullPresentRule)" min="1"/>
                                </div>
                            </td>
                            <!--<td style="width: 120px">
                                <div class="input-group">
                                    <input type="text" class="form-control" ng-model="r.preferential"/>
                                    <span class="input-group-addon">件</span>
                                </div>
                            </td>-->
                            <td>
                                <div class="input-group"   style="width: 180px">
                                    <input type="text" class="form-control" ng-model="r.desc" placeholder="描述" min="1"/>
                                </div>
                            </td>
                            <td align="center"  style="vertical-align: middle;width: 20px" ng-hide="promoact.status == 1||$index==0">
                                <button title="删除" ng-click="removeProductFullPresentRule($index,1)"class="btn btn-danger btn-xs" aria-label="Left Align">
                                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                </button>
                            </td>
                            <!--<td><label class="text-info">SKU:894444，商品名称：莫斯利安酸奶，规格：220g</label></td>-->
                        </tr>
                        </tbody>
                    </table>
                    <!--<div class=" clearfix cms-workarea1 form-inline text-center" ng-hide="promoact.status == 1">-->
                        <!--<button title="添加" ng-click="addProductFullPresentRule()"class="btn btn-success btn-sm" >-->
                            <!--<span>添加</span>-->
                        <!--</button>-->
                    <!--</div>-->
                </div>

                <!--x元选m件-->
                <div class="col-lg-4 bg-info"  style="text-align: left" ng-show="{'OPTIONALLY':true}[promoact.type]">
                    <table class="table table-condensed table-hover">
                        <tbody>
                        <tr ng-repeat="r in fullChooseRule">
                            <td>
                                <div class="input-group">
                                    <span class="input-group-addon">专区商品</span>
                                    <input type="text" class="form-control" ng-model="r.preferential" ng-disabled="promoact.status == 1" min="1"/>
                                    <span class="input-group-addon">元</span>
                                </div>
                           </td>
                            <td>
                                <div class="input-group">
                                    <span class="input-group-addon">任选</span>
                                    <input type="text" class="form-control" ng-model="r.limit" ng-disabled="promoact.status == 1" min="1"/>
                                    <span class="input-group-addon">件</span>
                                </div>
                            </td>
                            <td>
                                <div class="input-group" style="width: 150px;">
                                    <input type="text" class="form-control" ng-model="r.desc" placeholder="描述" min="1"/>
                                </div>
                            </td>
                            <td align="center"  style="vertical-align: middle;width: 20px" ng-hide="promoact.status == 1||$index==0">
                                <button title="删除" ng-click="removeFullChooseRule($index,1)"class="btn btn-danger btn-xs" aria-label="Left Align">
                                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <!--<div class=" clearfix cms-workarea1 form-inline text-center" ng-hide="promoact.status == 1">-->
                        <!--<button title="添加" ng-click="addFullChooseRule()"class="btn btn-success btn-sm" >-->
                            <!--<span>添加</span>-->
                        <!--</button>-->
                    <!--</div>-->
                </div>

                <!--限时特价-->
                <div class="col-lg-4 bg-info"  style="text-align: left" ng-show="{'SPECIAL':true}[promoact.type]">
                    <table class="table table-condensed table-hover">
                        <tbody>
                        <tr>
                            <!--<td><input type="checkbox" ng-model="isSpecial"/>是否限购</td>-->
                            <div>
                                <td><input type="radio" name = "specialOffer.type" value="ORDER_ITEM" ng-model="specialRule[0].type" ng-disabled="promoact.status == 1" checked/>每单限购</td>
                                <td><input type="radio" name = "specialOffer.type" value="USER_ITEM" ng-model="specialRule[0].type" ng-disabled="promoact.status == 1"/>每用户限购</td>
                                <td><input type="radio" name = "specialOffer.type" value="NO_LIMIT" ng-model="specialRule[0].type" ng-disabled="promoact.status == 1"/>不限购</td>
                            </div>
                        </tr>
                        <!--<tr>
                            <td><input type="checkbox" ng-model="specialOffer.specialQty" value="1"/>限购库存</td>
                        </tr>-->
                        </tbody>
                    </table>
                </div>
                <!--限时抢购-->
                <div class="col-lg-4 bg-info"  style="text-align: left" ng-show="{'PANICBUY':true}[promoact.type]">
                    <table class="table table-condensed table-hover">
                        <tbody>
                        <tr>
                            <!--<td><input type="checkbox" ng-model="isSpecial"/>是否限购</td>-->
                            <div>
                                <td><input type="radio" name = "panicbuyRule.type" value="ORDER_ITEM" ng-model="panicbuyRule[0].type" ng-disabled="promoact.status == 1"/>每单限购</td>
                                <td><input type="radio" name = "panicbuyRule.type" value="USER_ITEM" ng-model="panicbuyRule[0].type" ng-disabled="promoact.status == 1"/>每用户限购</td>
                            </div>
                        </tr>
                        <!--<tr>
                            <td><input type="checkbox" ng-model="specialOffer.specialQty" value="1"/>限购库存</td>
                        </tr>-->
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="row show-grid cms-workarea1">
                <div class="col-lg-1 cms-workarea1" style="text-align: right">
                    <label class="control-label"><span style="color: red"> * </span>应用终端</label>
                </div>
                <div class="col-lg-1 form-inline"  style="text-align: left">
                    <input type="checkbox" ng-model="terminal.app"/>APP
                </div>
                <div class="col-lg-1 form-inline"  style="text-align: left">
                    <input type="checkbox" ng-model="terminal.web"/>WEB
                </div>
                <div class="col-lg-1 form-inline"  style="text-align: left">
                    <input type="checkbox" ng-model="terminal.wap"/>H5
                </div>
            </div>
            <div class="row show-grid cms-workarea1">
                <div class="col-lg-1 cms-workarea1" style="text-align: right">
                    <label class="control-label">优惠活动URL(web)</label>
                </div>
                <div class="col-lg-4"  style="text-align: left">
                    <input type="text" class="form-control" id="pcUrl" ng-model="promoact.pcUrl" placeholder="http://">
                </div>
                <div class="col-lg-4 cms-workarea1">
                    <label class="text-warning">可选，请输入活动URL</label>
                </div>
            </div>
            <div class="row show-grid cms-workarea1">
                <div class="col-lg-1 cms-workarea1" style="text-align: right">
                    <label class="control-label">优惠活动URL(h5)</label>
                </div>
                <div class="col-lg-4"  style="text-align: left">
                    <input type="text" class="form-control" id="activityUrlH5" ng-model="promoact.mobileUrl" placeholder="http://">
                </div>
                <div class="col-lg-4 cms-workarea1">
                    <label class="text-warning">可选，请输入活动URL</label>
                </div>
            </div>
            <div class="row show-grid cms-workarea1">
                <div class="col-lg-1 cms-workarea1" style="text-align: right">
                    <label class="control-label">备注说明</label>
                </div>
                <div class="col-lg-4"  style="text-align: left">
                    <textarea  type="" class="form-control" id="remark" ng-model="promoact.remarks"></textarea>
                </div>
            </div>
        </form>

        <div class=" clearfix cms-workarea1 form-inline text-center">
            <button title="上一步" ng-click="preItem.createIndex()" class="btn btn-primary" >
                <span>上一步</span>
            </button>
            <button title="创建" ng-click="nextItem.confirmRule()" class="btn btn-primary" ng-hide="promoact.status==1||promoact.status==0">
                <span>创建</span>
            </button>
            <button title="保存" ng-click="nextItem.confirmRule()" class="btn btn-primary" ng-show="promoact.status==1||promoact.status==0">
                <span>保存</span>
            </button>
        </div>
    </div>
</div>
